/*!
 Gramercy Controls v4.0.0 
 Date: 18-07-2014 21:03:43 
 Revision: undefined 
 */

!function(a){a.fn.editor=function(b){function c(b){this.element=a(b),this.init()}var d="editor",e={buttons:["header1","header2","seperator","bold","italic","underline","seperator","justifyLeft","justifyCenter","justifyRight","seperator","quote","orderedlist","unorderedlist","seperator","anchor","seperator","image","video"],staticToolbar:!0,delay:200,diffLeft:0,diffTop:-10,firstHeader:"h3",secondHeader:"h4",forcePlainText:!0,targetBlank:!1,extensions:{}},f=a.extend({},e,b);return c.prototype={init:function(){return this.parentElements=["p","h1","h2","h3","h4","h5","h6","blockquote","pre"],this.id=a(".editor-toolbar").length+1,this.setup()},setup:function(){this.isActive=!0,this.initElements().bindSelect().bindPaste().bindWindowActions()},initElements:function(){var a,b=this.element;return b.attr("contentEditable",!0),b.attr("data-editor",!0),this.bindParagraphCreation(a).bindTab(a),this.initToolbar().bindButtons().bindAnchorPreview(),this},bindParagraphCreation:function(){var a=this;return this.element.on("keyup",function(b){var c,d=a.getSelectionStart();d&&d.getAttribute("data-editor")&&0===d.children.length&&document.execCommand("formatBlock",!1,"p"),13===b.which&&(d=a.getSelectionStart(),c=d.tagName.toLowerCase(),"li"===c||a.isListItemChild(d)||(b.shiftKey||document.execCommand("formatBlock",!1,"p"),"a"===c&&document.execCommand("unlink",!1,null)))}),this},bindTab:function(){var a=this;return this.element.on("keydown",function(b){if(9===b.which){var c=a.getSelectionStart().tagName.toLowerCase();"pre"===c&&(b.preventDefault(),document.execCommand("insertHtml",null,"    "))}}),this},initToolbar:function(){return this.toolbar?this:(this.toolbar=this.createToolbar(),this.keepToolbarAlive=!1,this.toolbarActions=this.toolbar.find(".editor-toolbar-actions"),this)},createToolbar:function(){var b=a("<div></div>").attr("class","editor-toolbar").attr("id","editor-toolbar-"+this.id);return b.append(this.toolbarButtons()),b.insertAfter(this.element),b},toolbarButtons:function(){var b,c,d,e,g=f.buttons,h=a("<ul></ul>").attr("id","editor-toolbar-actions").attr("class","editor-toolbar-actions");for(c=0;c<g.length;c+=1)f.extensions.hasOwnProperty(g[c])?(e=f.extensions[g[c]],d=void 0!==e.getButton?e.getButton():null):d=this.buttonTemplate(g[c]),d&&(b=a("<li></li>"),b.append(d).appendTo(h));return h},buttonTemplate:function(a){var b=this.getButtonLabels(f.buttonLabels),c={bold:'<button type="button" class="editor-action editor-action-bold" title="Bold" data-action="bold" data-element="b">'+b.bold+"</button>",italic:'<button type="button" class="editor-action editor-action-italic" title="italic" data-action="italic" data-element="i">'+b.italic+"</button>",underline:'<button type="button" class="editor-action editor-action-underline" title="underline" data-action="underline" data-element="u">'+b.underline+"</button>",strikethrough:'<button type="button" class="editor-action editor-action-strikethrough" title="strike through" data-action="strikethrough" data-element="strike"><strike>A</strike></button>',superscript:'<button type="button" class="editor-action editor-action-superscript" title="superscript" data-action="superscript" data-element="sup">'+b.superscript+"</button>",subscript:'<button type="button" class="editor-action editor-action-subscript" title="subscript" data-action="subscript" data-element="sub">'+b.subscript+"</button>",seperator:'<div class="editor-toolbar-seperator"></div>',anchor:'<button type="button" class="editor-action editor-action-anchor" title="insert anchor" data-action="anchor" data-modal="editor-modal-url" data-element="a">'+b.anchor+"</button>",image:'<button type="button" class="editor-action editor-action-image" title="insert image" data-action="image" data-modal="editor-modal-image" data-element="img">'+b.image+"</button>",video:'<button type="button" class="editor-action editor-action-video" title="insert video" data-action="video" data-element="video">'+b.video+"</button>",header1:'<button type="button" class="editor-action editor-action-header1" title="'+f.firstHeader+'" data-action="append-'+f.firstHeader+'" data-element="'+f.firstHeader+'">'+b.header1+"</button>",header2:'<button type="button" class="editor-action editor-action-header2" title="'+f.secondHeader+'" data-action="append-'+f.secondHeader+'" data-element="'+f.secondHeader+'">'+b.header2+"</button>",quote:'<button type="button" class="editor-action editor-action-quote" title="blockquote" data-action="append-blockquote" data-element="blockquote">'+b.quote+"</button>",orderedlist:'<button type="button" class="editor-action editor-action-orderedlist" title="ordered list" data-action="insertorderedlist" data-element="ol">'+b.orderedlist+"</button>",unorderedlist:'<button type="button" class="editor-action editor-action-unorderedlist" title="unordered list" data-action="insertunorderedlist" data-element="ul">'+b.unorderedlist+"</button>",pre:'<button type="button" class="editor-action editor-action-pre" data-action="append-pre" title="pre" data-element="pre">'+b.pre+"</button>",indent:'<button type="button" class="editor-action editor-action-indent" data-action="indent" title="indent" data-element="ul">'+b.indent+"</button>",outdent:'<button type="button" class="editor-action editor-action-outdent" data-action="outdent" title="outdent" data-element="ul">'+b.outdent+"</button>",justifyLeft:'<button type="button" class="editor-action editor-action-indent" title="justify left" data-action="justifyLeft" >'+b.justifyLeft+"</button>",justifyCenter:'<button type="button" class="editor-action editor-action-outdent" title="justify center" data-action="justifyCenter">'+b.justifyCenter+"</button>",justifyRight:'<button type="button" class="editor-action editor-action-outdent" title="justify right" data-action="justifyRight" >'+b.justifyRight+"</button>"};return c[a]||!1},getButtonLabels:function(a){var b,c,d={bold:"<b>B</b>",italic:"<b><i>I</i></b>",underline:"<b><u>U</u></b>",superscript:"<b>x<sup>1</sup></b>",subscript:"<b>x<sub>1</sub></b>",anchor:'<svg class="icon icon-link" viewBox="0 0 32 32"><use xlink:href="#icon-link"></svg>',image:'<svg class="icon icon-image" viewBox="0 0 32 32"><use xlink:href="#icon-image"></svg>',video:'<svg class="icon icon-video" viewBox="0 0 32 32"><use xlink:href="#icon-video"></svg>',header1:"<b>H3</b>",header2:"<b>H4</b>",quote:'<svg class="icon icon-blockquote" viewBox="0 0 32 32"><use xlink:href="#icon-blockquote"></svg>',orderedlist:'<svg class="icon icon-orderedlist" viewBox="0 0 32 32"><use xlink:href="#icon-orderedlist"></svg>',unorderedlist:'<svg class="icon icon-unorderedlist" viewBox="0 0 32 32"><use xlink:href="#icon-unorderedlist"></svg>',pre:"<b>0101</b>",indent:"<b>&rarr;</b>",outdent:"<b>&larr;</b>",justifyLeft:'<svg class="icon icon-justify-left" viewBox="0 0 32 32"><use xlink:href="#icon-justify-left"></svg>',justifyCenter:'<svg class="icon icon-justify-center" viewBox="0 0 32 32"><use xlink:href="#icon-justify-center"></svg>',justifyRight:'<svg class="icon icon-justify-right" viewBox="0 0 32 32"><use xlink:href="#icon-justify-right"></svg>'};if("object"==typeof a&&(b=a),"object"==typeof b)for(c in b)b.hasOwnProperty(c)&&(d[c]=b[c]);return d},activateButton:function(a){this.toolbar.find('[data-element="'+a+'"]').addClass("is-active")},bindButtons:function(){var b=this;return this.toolbar.on("click.editor","button",function(c){var d=a(this),e=d.attr("data-action");c.preventDefault(),"anchor"!==e&&"image"!==e&&"video"!==e&&(void 0===b.selection&&b.checkSelection(),d.toggleClass("is-active"),d.attr("data-action")&&b.execAction(d.attr("data-action"),c),b.element.focus(),b.keepToolbarAlive=!1)}).on("mousedown.editor","button",function(){b.keepToolbarAlive=!0}),a("#editor-modal-url, #editor-modal-image").modal().on("beforeOpen",function(){if(b.savedSelection=b.saveSelection(),this.keepToolbarAlive=!0,"editor-modal-url"===a(this).attr("id")){if(!b.selectionRange)return!1;if(b.isLinkSelected())return document.execCommand("unlink",!1,null),!1}}).on("open",function(){a(this).find("input:first").focus().select()}).on("close",function(c,d){b.keepToolbarAlive=!1,b.restoreSelection(b.savedSelection),d||("editor-modal-url"===a(this).attr("id")?b.createLink(a(this).find("input:first")):b.insertImage(a("#image").val()))}),this},bindAnchorPreview:function(){this.element.find("a").tooltip({content:function(){return a(this).attr("href")}})},createLink:function(a){this.restoreSelection(this.savedSelection),a.val(this.fixLinkFormat(a.val())),document.execCommand("createLink",!1,a.val()),f.targetBlank&&this.setTargetBlank(),this.bindAnchorPreview()},fixLinkFormat:function(a){var b=/^https?:\/\//;return a.match(b)?a:"http://"+a},bindSelect:function(){var b=this,c="";return this.selectionHandler=function(d){b.keepToolbarAlive=f.staticToolbar&&a(d.currentTarget).hasClass(".editable")&&b.toolbar.hasClass("is-active")&&"blur"!==d.type?!0:!1,clearTimeout(c),c=setTimeout(function(){b.checkSelection()},f.delay)},this.element.on("mouseup.editor",this.selectionHandler),this.element.on("keyup.editor",this.selectionHandler),this.element.on("blur.editor",function(a){b.keepToolbarAlive||(setTimeout(function(){return f.staticToolbar&&!b.keepToolbarAlive?(b.keepToolbarAlive=!1,void b.hideToolbarActions()):void 0},400),b.selectionHandler(a))}),this},checkSelection:function(){var a,b;if(this.keepToolbarAlive!==!0){if(a=window.getSelection(),""===a.toString().trim())return f.staticToolbar?void this.setToolbarPosition().showToolbarActions():void this.hideToolbarActions();b=this.getSelectionElement(),b?this.checkSelectionElement(a,b):this.hideToolbarActions()}return this},getSelectionElement:function(){var a,b,c,d,e=window.getSelection(),f=function(a){var b=a;try{for(;!b.getAttribute("data-editor");)b=b.parentNode}catch(c){return!1}return b};try{a=e.getRangeAt(0),b=a.commonAncestorContainer,c=b.parentNode,d=b.getAttribute("data-editor")?b:f(c)}catch(g){d=f(c)}return d},checkSelectionElement:function(a,b){return this.selection=a,this.selectionRange=this.selection.getRangeAt(0),this.element[0]===b?void this.setToolbarButtonStates().setToolbarPosition().showToolbarActions():void this.hideToolbarActions()},setToolbarPosition:function(){var a=40,b=window.getSelection(),c=b.getRangeAt(0),d=c.getBoundingClientRect(),e=f.diffLeft-this.toolbar[0].offsetWidth/2,g=(d.left+d.right)/2,h=this.element.position(),i=this.toolbar[0].offsetWidth/2;return d.top<a?(this.toolbar.addClass("toolbar-arrow-over").removeClass("toolbar-arrow-under"),this.toolbar.css("top",a+d.bottom-f.diffTop+window.pageYOffset-this.toolbar[0].offsetHeight+"px")):(this.toolbar.addClass("toolbar-arrow-under").removeClass("toolbar-arrow-over"),this.toolbar.css("top",d.top+f.diffTop+window.pageYOffset-this.toolbar[0].offsetHeight+"px")),i>g?this.toolbar.css("left",e+i+"px"):window.innerWidth-g<i?this.toolbar.css("left",window.innerWidth+e-i+"px"):this.toolbar.css("left",e+g+"px"),f.staticToolbar&&(this.toolbar.removeClass("toolbar-arrow-over").removeClass("toolbar-arrow-under"),this.toolbar.css({left:h.left,top:h.top-this.toolbar.outerHeight()})),this},setToolbarButtonStates:function(){var a=this.toolbarActions.find("button");return a.removeClass("is-active"),this.checkActiveButtons(),this},checkActiveButtons:function(){this.checkButtonState("bold"),this.checkButtonState("italic"),this.checkButtonState("underline");for(var a=this,b=this.getSelectedParentElement();void 0!==b.tagName&&-1===this.parentElements.indexOf(b.tagName.toLowerCase)&&(this.activateButton(b.tagName.toLowerCase()),!a.element.is(b));)b=b.parentNode},checkButtonState:function(a){document.queryCommandState&&(document.queryCommandState(a)?this.toolbar.find('[data-action="'+a+'"]').addClass("is-active"):this.toolbar.find('[data-action="'+a+'"]').removeClass("is-active"))},rangeSelectsSingleNode:function(a){var b=a.startContainer;return b===a.endContainer&&b.hasChildNodes()&&a.endOffset===a.startOffset+1},getSelectedParentElement:function(){var a=null,b=this.selectionRange;return a=this.rangeSelectsSingleNode(b)?b.startContainer.childNodes[b.startOffset]:3===b.startContainer.nodeType?b.startContainer.parentNode:b.startContainer},hideToolbarActions:function(){this.keepToolbarAlive=!1,void 0!==this.toolbar&&this.toolbar.removeClass("is-active")},showToolbarActions:function(){var a,b=this;this.toolbarActions.show(),this.keepToolbarAlive=!1,clearTimeout(a),a=setTimeout(function(){b.toolbar.addClass("is-active")},100)},bindPaste:function(){var a=this;return this.pasteWrapper=function(b){var c,d,e="";if(!f.forcePlainText)return this;if(b.clipboardData&&b.clipboardData.getData&&!b.defaultPrevented){for(b.preventDefault(),c=b.clipboardData.getData("text/plain").split(/[\r\n]/g),d=0;d<c.length;d+=1)""!==c[d]&&(e+=navigator.userAgent.match(/firefox/i)&&0===d?a.htmlEntities(c[d]):"<p>"+a.htmlEntities(c[d])+"</p>");document.execCommand("insertHTML",!1,e)}},this.element[0].addEventListener("paste",this.pasteWrapper),this},htmlEntities:function(a){return String(a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},bindWindowActions:function(){var b,c=this;return this.windowResizeHandler=function(){clearTimeout(b),b=setTimeout(function(){c.toolbar&&c.toolbar.hasClass("is-active")&&c.setToolbarPosition()},100)},a(window).on("resize.editor",this.windowResizeHandler),this.element.prev(".label").css("cursor","default").on("click.editor",function(){c.element.focus()}),c.element.attr("aria-label",this.element.prev(".label").text()),this},restoreSelection:function(a){var b,c,d=window.getSelection();if(a||(a=this.savedSelection),a)for(d.removeAllRanges(),b=0,c=a.length;c>b;b+=1)d.addRange(a[b])},saveSelection:function(){var a,b,c,d=window.getSelection();if(d.getRangeAt&&d.rangeCount){for(c=[],a=0,b=d.rangeCount;b>a;a+=1)c.push(d.getRangeAt(a));return c}return null},getSelectionStart:function(){var a=document.getSelection().anchorNode,b=a&&3===a.nodeType?a.parentNode:a;return b},isLinkSelected:function(){var b=window.getSelection(),c=this.getSelectedParentElement();return b&&b.anchorNode&&a(b.anchorNode.nextSibling).is("a")?!0:c.tagName&&"a"===c.tagName.toLowerCase()},execAction:function(a){a.indexOf("append-")>-1?(this.execFormatBlock(a.replace("append-","")),this.setToolbarPosition(),this.setToolbarButtonStates()):"anchor"===a||("image"===a?this.insertImage():(document.execCommand(a,!1,null),this.setToolbarPosition()))},insertImage:function(a){document.execCommand("insertImage",!1,a)},execFormatBlock:function(a){var b=this.getSelectionData(this.selection.anchorNode);if("blockquote"===a&&b.el&&"blockquote"===b.el.parentNode.tagName.toLowerCase())return document.execCommand("outdent",!1,null);if(b.tagName===a&&(a="p"),this.isIE){if("blockquote"===a)return document.execCommand("indent",!1,a);a="<"+a+">"}return document.execCommand("formatBlock",!1,a)},getSelectionData:function(a){var b;for(a&&a.tagName&&(b=a.tagName.toLowerCase());a&&-1===this.parentElements.indexOf(b);)a=a.parentNode,a&&a.tagName&&(b=a.tagName.toLowerCase());return{el:a,tagName:b}},isListItemChild:function(a){for(var b=a.parentNode,c=b.tagName.toLowerCase();-1===this.parentElements.indexOf(c)&&"div"!==c;){if("li"===c)return!0;if(b=b.parentNode,!b||!b.tagName)return!1;c=b.tagName.toLowerCase()}return!1},destroy:function(){a("html").off("mouseup.editor"),a(window).on("resize.editor"),a.removeData(this.obj,d)}},this.each(function(){var g=a.data(this,d);g?g.settings=a.extend({},e,b):g=a.data(this,d,new c(this,f))})}}(jQuery),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a){a.fn.dropdown=function(b){function c(b){this.element=a(b),this.init()}var d="dropdown",e={editable:"false"},f=a.extend({},e,b);return c.prototype={init:function(){var b=this.element.attr("id")+"-shdo";this.orgLabel=this.element.hide().prev(".label"),this.label=a('<label class="label"></label>').attr("for",b).text(this.orgLabel.text()),this.input=a('<input type="text" readonly class="dropdown" tabindex="0"/>').attr({role:"combobox"}).attr({"aria-autocomplete":"none","aria-owns":"dropdown-list"}).attr({"aria-readonly":"true","aria-activedescendant":"dropdown-opt16"}).attr("id",b),this.element.after(this.label,this.input,this.trigger),this.orgLabel.hide(),this.updateList(),this.setValue(),this.setWidth(),this._bindEvents()},setWidth:function(){var a=this.element[0].style,b=this.orgLabel[0].style;a.width&&this.input.width(a.width),"absolute"===a.position&&this.input.css({position:"absolute",left:a.left,top:a.top,bottom:a.bottom,right:a.right}),"absolute"===b.position&&this.label.css({position:"absolute",left:b.left,top:b.top,bottom:b.bottom,right:b.right})},updateList:function(){var b=this;b.list=a('<ul id="dropdown-list" class="dropdown-list" tabindex="-1" aria-expanded="true"></ul>'),b.element.find("option").each(function(c){var d=a(this),e=a('<li id="list-option'+c+'" role="option" class="dropdown-option" role="listitem" tabindex="-1">'+d.text()+"</li>");b.list.append(e),d.is(":selected")&&e.addClass("is-selected")})},setValue:function(){this.input.val(this.element.find("option:selected").text())},_bindEvents:function(){var b,c=this,d="";this.input.on("keydown.dropdown",function(b){c.handleKeyDown(a(this),b)}).on("keypress.dropdown",function(e){var f=e.charCode||e.keyCode;if(e.altKey&&(38===f||40===f))return e.stopPropagation(),!1;if(13===f)return e.stopPropagation(),!1;if(0!==e.which){var g=String.fromCharCode(e.which),h=a(c.element[0].options);d+=g.toLowerCase(),clearTimeout(b),setTimeout(function(){d=""},700),h.each(function(){return a(this).text().substr(0,d.length).toLowerCase()===d?(c.selectOption(a(this)),!1):void 0})}return!0}).on("mouseup.dropdown",function(){c.openList()})},openList:function(){var b=this.list.find(".is-selected"),c=this,d=!1,e=!1;this.list.appendTo("body").show().attr("aria-expanded","true"),this.list.css({top:this.input.position().top,left:this.input.position().left}),this.input.parentsUntil("body").each(function(){return"fixed"===a(this).css("position")?void(d=!0):void 0}),"absolute"===this.input.parent(".field").css("position")&&(e=!0,this.list.css({top:this.input.parent(".field").position().top+this.input.prev("label").height(),left:this.input.parent(".field").position().left})),d&&this.list.css("position","fixed"),this.list.width()>this.input.outerWidth()?this.list.css({width:this.list.width()+15}):this.list.width(this.input.outerWidth()),this.scrollToOption(b),this.input.addClass("is-open"),c.list.on("click.list","li",function(){var b=a(this).index(),d=a(c.element[0].options[b]);c.selectOption(d),c.input.focus(),c.closeList()}),a(document).on("click.dropdown",function(b){var d=a(b.target);d.is(".dropdown-option")||d.is(".dropdown")||c.closeList()}).on("resize.dropdown",function(){c.closeList()}).on("scroll.dropdown",function(){c.closeList()})},closeList:function(){this.list.hide().attr("aria-expanded","false").remove(),this.list.off("click.list").off("mousewheel.list"),this.input.removeClass("is-open"),a(document).off("click.dropdown resize.dropdown scroll.dropdown")},scrollToOption:function(a){var b=this;a&&0!==a.length&&(b.list.scrollTop(0),b.list.scrollTop(a.offset().top-b.list.offset().top-b.list.scrollTop()))},handleBlur:function(){var a=this;return this.isOpen()&&(this.timer=setTimeout(function(){a.closeList()},40)),!0},handleKeyDown:function(b,c){var d=this.element[0].selectedIndex,e=this.element.val(),f=this.element[0].options,g=this;if(c.altKey&&(38===c.keyCode||40===c.keyCode))return g.toggleList(!0),c.stopPropagation(),!1;switch(c.keyCode){case 8:case 46:return this.input.val(e),c.stopPropagation(),!1;case 9:return this.selectOption(a(f[d])),g.isOpen()&&g.closeList(!1),!0;case 27:return g.isOpen()&&g.closeList(!0),c.stopPropagation(),!1;case 13:return g.isOpen()?(g.selectOption(a(f[d])),g.closeList(!1)):g.openList(!1),c.stopPropagation(),!1;case 38:if(d>0){var h=a(f[d-1]);this.selectOption(h)}return c.stopPropagation(),c.preventDefault(),!1;case 40:if(d<f.length-1){var i=a(f[d+1]);this.selectOption(i)}return c.stopPropagation(),c.preventDefault(),!1;case 35:var j=a(f[f.length-1]);return this.selectOption(j),c.stopPropagation(),!1;case 36:var k=a(f[0]);return this.selectOption(k),c.stopPropagation(),!1}return!0},isOpen:function(){return this.list.is(":visible")},toggleList:function(){this.isOpen()?this.closeList():this.openList()},selectOption:function(a){var b=a.val();if(this.isOpen()){this.list.find(".is-selected").removeClass("is-selected");var c=this.list.find("#list-option"+a.index());c.addClass("is-selected"),this.input.attr("aria-activedescendant",c.attr("id")),this.scrollToOption(c)}this.input.val(a.text()),this.element.find('[value="'+b+'"]').length>0&&(this.element.find('[value="'+b+'"]')[0].selected=!0),this.element.val(b).trigger("change"),this.input.focus(),this.input[0].setSelectionRange(0,0)},destroy:function(){a.removeData(this.obj,d),this.input.off().remove(),a(document).off("click.dropdown")}},this.each(function(){var g=a.data(this,d);g?g.settings=a.extend({},e,b):g=a.data(this,d,new c(this,f))})}}),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a){function b(b,e){return this.name=c,this.el=b,this.$el=a(b),this.options=a.extend({},d,e),this.$document=a(this.$el[0].ownerDocument),this.$body=this.$document.find("body"),this.moveTrigger="MSPointerMove touchmove mousemove",this.startTrigger="MSPointerDown touchstart mousedown",this.stopTrigger="MSPointerUp touchend mouseup",this.startTriggerArray=this.startTrigger.split(" "),this.moveTriggerArray=this.moveTrigger.split(" "),this.stopTriggerArray=this.stopTrigger.split(" "),this.stopEvents=[this.stopTrigger,this.options.stopEvents].join(" "),this.$container="window"===this.options.constrainTo?this.$document:this.options.constrainTo&&"parent"!==this.options.constrainTo?a(this.options.constrainTo):this.$el.parent(),this.isPointerEventCompatible()&&this.applyMSDefaults(),this.CSSEaseHash=this.getCSSEaseHash(),this.scale=1,this.started=!1,this.disabled=!1,this.activeDropRegions=[],this.resetVelocityQueue(),this.init(),this}var c="draggable",d={initiate:function(){},start:function(){},drag:function(){},stop:function(){},easing:function(){},rest:function(){},moveTo:!1,callIfNotStarted:["stop","rest"],startThreshold:[0,0],grid:[1,1],activeClass:"is-active",multiplier:1,velocityMultiplier:2.5,shouldPreventDefault:!0,allowDragEventPropagation:!0,stopEvents:"",hardwareAccelerate:!0,useCSSTranslation:!0,disableSelect:!0,cssEaseString:"cubic-bezier(0.190, 1.000, 0.220, 1.000)",cssEaseDuration:1e3,shouldEase:!0,droppable:!1,droppableActiveClass:"is-droppableto",constrainTo:!1,removeMargins:!1,place:!0,axis:null,forceNonCSS3Movement:!1,elementsWithInteraction:"input",revert:!1,revertAfter:"stop",revertIf:function(){return!0},ignoreRightClick:!0};b.prototype.init=function(){this.options.disableSelect&&this.disableSelect(),this.options.place&&(this.positionParent(),this.placeObject()),this.ev={},this.pos={},this.subscribe()},b.prototype.subscribe=function(){var a=this;this.onStartEvent=function(b){a.handleStart(b)},this.$el.on(this.startTrigger,this.onStartEvent),this.onStartEventOnElementsWithInteraction=function(a){a.stopPropagation()},this.$el.on(this.startTrigger,this.options.elementsWithInteraction,this.onStartEventOnElementsWithInteraction),this.onStopEvents=function(b){a.handleStop(b)},this.$document.on(this.stopEvents,this.onStopEvents),this.onMoveEvents=function(b){a.moveEvent=b},this.$document.on(this.moveTrigger,this.onMoveEvents)},b.prototype.unsubscribe=function(){this.$el.off(this.startTrigger,this.onStartEvent),this.$el.off(this.startTrigger,this.options.elementsWithInteraction,this.onStartEventOnElementsWithInteraction),this.$document.off(this.stopEvents,this.onStopEvents),this.$document.off(this.moveTrigger,this.onMoveEvents)},b.prototype.handleStart=function(a){var b=this;if(this.isValidMoveEvent(a)&&!this.disabled&&3!==a.which){this.isPointerEventCompatible()&&a.preventManipulation&&a.preventManipulation(),a=this.normalizeEvent(a),this.options.hardwareAccelerate&&!this.hardwareAccelerated&&(this.hardwareAccelerate(),this.hardwareAccelerated=!0);var c=this.options.initiate.call(this,a,this);if(this.$el.trigger("initiate",[this,a,this]),c===!1)return;clearTimeout(this.restTimeout),this.$el.addClass(this.options.activeClass),this.removeCSSEasing(),this.startX=this.ev.x=a.pep.x,this.startY=this.ev.y=a.pep.y,this.initialPosition=this.initialPosition||this.$el.position(),this.startEvent=this.moveEvent=a,this.active=!0,this.options.shouldPreventDefault&&a.preventDefault(),this.options.allowDragEventPropagation||a.stopPropagation(),function d(){b.active&&(b.handleMove(),b.requestAnimationFrame(d))}(b),function e(){b.easing&&(b.options.easing.call(b,null,b),b.$el.trigger("easing",[b,null,b])),b.requestAnimationFrame(e)}(b)}},b.prototype.handleMove=function(){if("undefined"!=typeof this.moveEvent){var b=this.normalizeEvent(this.moveEvent),c=window.parseInt(b.pep.x/this.options.grid[0])*this.options.grid[0],d=window.parseInt(b.pep.y/this.options.grid[1])*this.options.grid[1];this.addToLIFO({time:b.timeStamp,x:c,y:d});var e,f;if(a.inArray(b.type,this.startTriggerArray)>-1?(e=0,f=0):(e=c-this.ev.x,f=d-this.ev.y),this.dx=e,this.dy=f,this.ev.x=c,this.ev.y=d,0!==e||0!==f){var g=Math.abs(this.startX-c),h=Math.abs(this.startY-d);!this.started&&(g>this.options.startThreshold[0]||h>this.options.startThreshold[1])&&(this.started=!0,this.$el.addClass("pep-start"),this.options.start.call(this,this.startEvent,this),this.$el.trigger("start",[this,this.startEvent,this])),this.options.droppable&&this.calculateActiveDropRegions();var i=this.options.drag.call(this,b,this);return this.$el.trigger("drag",[this,b,this]),i===!1?void this.resetVelocityQueue():void this.doMoveTo(e,f)}}},b.prototype.doMoveTo=function(a,b){var c,d,e=this.handleConstraint(a,b);"function"==typeof this.options.moveTo?(c=a>=0?"+="+Math.abs(a/this.scale)*this.options.multiplier:"-="+Math.abs(a/this.scale)*this.options.multiplier,d=b>=0?"+="+Math.abs(b/this.scale)*this.options.multiplier:"-="+Math.abs(b/this.scale)*this.options.multiplier,this.options.constrainTo&&(c=e.x!==!1?e.x:c,d=e.y!==!1?e.y:d),"x"===this.options.axis&&(d=e.y),"y"===this.options.axis&&(c=e.x),this.options.moveTo.call(this,c,d)):this.shouldUseCSSTranslation()?(a=a/this.scale*this.options.multiplier,b=b/this.scale*this.options.multiplier,this.options.constrainTo&&(a=e.x===!1?a:0,b=e.y===!1?b:0),"x"===this.options.axis&&(b=0),"y"===this.options.axis&&(a=0),this.moveToUsingTransforms(a,b)):(c=a>=0?"+="+Math.abs(a/this.scale)*this.options.multiplier:"-="+Math.abs(a/this.scale)*this.options.multiplier,d=b>=0?"+="+Math.abs(b/this.scale)*this.options.multiplier:"-="+Math.abs(b/this.scale)*this.options.multiplier,this.options.constrainTo&&(c=e.x!==!1?e.x:c,d=e.y!==!1?e.y:d),"x"===this.options.axis&&(d=e.y),"y"===this.options.axis&&(c=e.x),this.moveTo(c,d))},b.prototype.handleStop=function(b){this.active&&(this.active=!1,this.easing=!0,this.$el.removeClass("pep-start").addClass("pep-ease"),this.options.droppable&&this.calculateActiveDropRegions(),(this.started||!this.started&&a.inArray("stop",this.options.callIfNotStarted)>-1)&&(this.options.stop.call(this,b,this),this.$el.trigger("stop",[b,this])),this.options.shouldEase?this.ease(b,this.started):this.removeActiveClass(),this.options.revert&&("stop"===this.options.revertAfter||!this.options.shouldEase)&&this.options.revertIf&&this.options.revertIf.call(this)&&this.revert(),this.started=!1,this.resetVelocityQueue())},b.prototype.ease=function(b,c){var d=this.velocity(),e=d.x/this.scale*this.options.multiplier,f=d.y/this.scale*this.options.multiplier,g=this.handleConstraint(e,f,!0);this.cssAnimationsSupported()&&this.$el.css(this.getCSSEaseHash());var h=d.x>0?"+="+e:"-="+Math.abs(e),i=d.y>0?"+="+f:"-="+Math.abs(f);this.options.constrainTo&&(h=g.x!==!1?g.x:h,i=g.y!==!1?g.y:i),"x"===this.options.axis&&(i="+=0"),"y"===this.options.axis&&(h="+=0");var j=!this.cssAnimationsSupported()||this.options.forceNonCSS3Movement;"function"==typeof this.options.moveTo?this.options.moveTo.call(this,h,i):this.moveTo(h,i,j);var k=this;this.restTimeout=setTimeout(function(){k.options.droppable&&k.calculateActiveDropRegions(),k.easing=!1,(c||!c&&a.inArray("rest",k.options.callIfNotStarted)>-1)&&(k.options.rest.call(k,b,k),k.$el.trigger("rest",[k,b,k])),k.options.revert&&"ease"===k.options.revertAfter&&k.options.shouldEase&&k.options.revertIf&&k.options.revertIf.call(k)&&k.revert(),k.removeActiveClass()},this.options.cssEaseDuration)},b.prototype.normalizeEvent=function(a){return a.pep={},this.isPointerEventCompatible()||!this.isTouch(a)?(a.pageX?(a.pep.x=a.pageX,a.pep.y=a.pageY):(a.pep.x=a.originalEvent.pageX,a.pep.y=a.originalEvent.pageY),a.pep.type=a.type):(a.pep.x=a.originalEvent.touches[0].pageX,a.pep.y=a.originalEvent.touches[0].pageY,a.pep.type=a.type),a},b.prototype.resetVelocityQueue=function(){this.velocityQueue=new Array(5)},b.prototype.moveTo=function(a,b,c){c?this.$el.animate({top:b,left:a},0,"easeOutQuad",{queue:!1}):this.$el.stop(!0,!1).css({top:b,left:a})},b.prototype.moveToUsingTransforms=function(a,b){var c=this.matrixToArray(this.matrixString());this.cssX||(this.cssX=this.xTranslation(c)),this.cssY||(this.cssY=this.yTranslation(c)),this.cssX=this.cssX+a,this.cssY=this.cssY+b,c[4]=this.cssX,c[5]=this.cssY,this.translation=this.arrayToMatrix(c),this.transform(this.translation)},b.prototype.transform=function(a){this.$el.css({"-webkit-transform":a,"-moz-transform":a,"-ms-transform":a,"-o-transform":a,transform:a})},b.prototype.xTranslation=function(a){return a=a||this.matrixToArray(this.matrixString()),parseInt(a[4],10)},b.prototype.yTranslation=function(a){return a=a||this.matrixToArray(this.matrixString()),parseInt(a[5],10)},b.prototype.matrixString=function(){var a=function(a){return!(!a||"none"===a||a.indexOf("matrix")<0)},b="matrix(1, 0, 0, 1, 0, 0)";return a(this.$el.css("-webkit-transform"))&&(b=this.$el.css("-webkit-transform")),a(this.$el.css("-moz-transform"))&&(b=this.$el.css("-moz-transform")),a(this.$el.css("-ms-transform"))&&(b=this.$el.css("-ms-transform")),a(this.$el.css("-o-transform"))&&(b=this.$el.css("-o-transform")),a(this.$el.css("transform"))&&(b=this.$el.css("transform")),b},b.prototype.matrixToArray=function(a){return a.split("(")[1].split(")")[0].split(",")},b.prototype.arrayToMatrix=function(a){return"matrix("+a.join(",")+")"},b.prototype.addToLIFO=function(a){var b=this.velocityQueue;b=b.slice(1,b.length),b.push(a),this.velocityQueue=b},b.prototype.velocity=function(){for(var a=0,b=0,c=0;c<this.velocityQueue.length-1;c++)this.velocityQueue[c]&&(a+=this.velocityQueue[c+1].x-this.velocityQueue[c].x,b+=this.velocityQueue[c+1].y-this.velocityQueue[c].y,this.dt=this.velocityQueue[c+1].time-this.velocityQueue[c].time);return{x:a*this.options.velocityMultiplier,y:b*this.options.velocityMultiplier}},b.prototype.revert=function(){this.shouldUseCSSTranslation()&&this.moveToUsingTransforms(-this.xTranslation(),-this.yTranslation()),this.moveTo(this.initialPosition.left,this.initialPosition.top)},b.prototype.requestAnimationFrame=function(a){return window.requestAnimationFrame&&window.requestAnimationFrame(a)||window.webkitRequestAnimationFrame&&window.webkitRequestAnimationFrame(a)||window.mozRequestAnimationFrame&&window.mozRequestAnimationFrame(a)||window.oRequestAnimationFrame&&window.mozRequestAnimationFrame(a)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame(a)||window.setTimeout(a,1e3/60)},b.prototype.positionParent=function(){this.options.constrainTo&&!this.parentPositioned&&(this.parentPositioned=!0,"parent"===this.options.constrainTo?this.$container.css({position:"relative"}):"window"===this.options.constrainTo&&"#document"!==this.$container.get(0).nodeName&&"static"!==this.$container.css("position")&&this.$container.css({position:"static"}))},b.prototype.placeObject=function(){this.objectPlaced||(this.objectPlaced=!0,this.offset="parent"===this.options.constrainTo||this.hasNonBodyRelative()?this.$el.position():this.$el.offset(),parseInt(this.$el.css("left"),10)&&(this.offset.left=this.$el.css("left")),parseInt(this.$el.css("top"),10)&&(this.offset.top=this.$el.css("top")),this.options.removeMargins&&this.$el.css({margin:0}),this.$el.css({position:"absolute",top:this.offset.top,left:this.offset.left}))
},b.prototype.hasNonBodyRelative=function(){return this.$el.parents().filter(function(){var b=a(this);return b.is("body")||"relative"===b.css("position")}).length>1},b.prototype.setScale=function(a){this.scale=a},b.prototype.setMultiplier=function(a){this.options.multiplier=a},b.prototype.removeCSSEasing=function(){this.cssAnimationsSupported()&&this.$el.css(this.getCSSEaseHash(!0))},b.prototype.disableSelect=function(){this.$el.css({"-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none"})},b.prototype.removeActiveClass=function(){this.$el.removeClass([this.options.activeClass,"pep-ease"].join(" "))},b.prototype.handleConstraint=function(b,c,d){var e=this.$el.position();this.pos.x=e.left,this.pos.y=e.top;var f,g,h,i,j={x:!1,y:!1};return a.isArray(this.options.constrainTo)?(void 0!==this.options.constrainTo[3]&&void 0!==this.options.constrainTo[1]&&(g=this.options.constrainTo[1]===!1?1/0:this.options.constrainTo[1],h=this.options.constrainTo[3]===!1?-1/0:this.options.constrainTo[3]),this.options.constrainTo[0]!==!1&&this.options.constrainTo[2]!==!1&&(f=this.options.constrainTo[2]===!1?1/0:this.options.constrainTo[2],i=this.options.constrainTo[0]===!1?-1/0:this.options.constrainTo[0]),this.pos.x+b<h&&(j.x=h),this.pos.y+c<i&&(j.y=i)):"string"==typeof this.options.constrainTo&&(h=0,i=0,g=this.$container.width()-this.$el.outerWidth(),f=this.$container.height()-this.$el.outerHeight(),this.pos.x+b<0&&(j.x=0),this.pos.y+c<0&&(j.y=0)),this.pos.x+b>g&&(j.x=g),this.pos.y+c>f&&(j.y=f),this.shouldUseCSSTranslation()&&d&&(j.x===h&&this.xTranslation()&&(j.x=h-this.xTranslation()),j.x===g&&this.xTranslation()&&(j.x=g-this.xTranslation()),j.y===i&&this.yTranslation()&&(j.y=i-this.yTranslation()),j.y===f&&this.yTranslation()&&(j.y=f-this.yTranslation())),j},b.prototype.getCSSEaseHash=function(a){"undefined"==typeof a&&(a=!1);var b;if(a)b="";else{if(this.CSSEaseHash)return this.CSSEaseHash;b=["all",this.options.cssEaseDuration+"ms",this.options.cssEaseString].join(" ")}return{"-webkit-transition":b,"-moz-transition":b,"-ms-transition":b,"-o-transition":b,transition:b}},b.prototype.calculateActiveDropRegions=function(){var b=this;this.activeDropRegions.length=0,a.each(a(this.options.droppable),function(c,d){var e=a(d);b.isOverlapping(e,b.$el)?(e.addClass(b.options.droppableActiveClass),b.activeDropRegions.push(e)):e.removeClass(b.options.droppableActiveClass)})},b.prototype.isOverlapping=function(a,b){var c=a[0].getBoundingClientRect(),d=b[0].getBoundingClientRect();return!(c.right<d.left||c.left>d.right||c.bottom<d.top||c.top>d.bottom)},b.prototype.isTouch=function(a){return a.type.search("touch")>-1},b.prototype.isPointerEventCompatible=function(){return"MSPointerEvent"in window},b.prototype.applyMSDefaults=function(){this.$el.css({"-ms-touch-action":"none","touch-action":"none","-ms-scroll-chaining":"none","-ms-scroll-limit":"0 0 0 0"})},b.prototype.isValidMoveEvent=function(a){return!this.isTouch(a)||this.isTouch(a)&&a.originalEvent&&a.originalEvent.touches&&1===a.originalEvent.touches.length},b.prototype.shouldUseCSSTranslation=function(){var a=!1;return this.options.forceNonCSS3Movement?!1:"undefined"!=typeof this.useCSSTranslation?this.useCSSTranslation:(a=!this.options.useCSSTranslation||"undefined"!=typeof Modernizr&&!Modernizr.csstransforms?!1:!0,this.useCSSTranslation=a,a)},b.prototype.cssAnimationsSupported=function(){if("undefined"!=typeof this.cssAnimationsSupport)return this.cssAnimationsSupport;if("undefined"!=typeof Modernizr&&Modernizr.cssanimations)return this.cssAnimationsSupport=!0,!0;var a=!1,b=document.createElement("div"),c="animation",d="",e="Webkit Moz O ms Khtml".split(" "),f="";if(b.style.animationName&&(a=!0),a===!1)for(var g=0;g<e.length;g++)if(void 0!==b.style[e[g]+"AnimationName"]){f=e[g],c=f+"Animation",d="-"+f.toLowerCase()+"-",a=!0;break}return this.cssAnimationsSupport=a,a},b.prototype.hardwareAccelerate=function(){this.$el.css({"-webkit-perspective":1e3,perspective:1e3,"-webkit-backface-visibility":"hidden","backface-visibility":"hidden"})},b.prototype.getMovementValues=function(){return{ev:this.ev,pos:this.pos,velocity:this.velocity()}},b.prototype.toggle=function(a){this.disabled="undefined"==typeof a?!this.disabled:!a},a.extend(a.easing,{easeOutQuad:function(a,b,c,d,e){return-d*(b/=e)*(b-2)+c},easeOutCirc:function(a,b,c,d,e){return d*Math.sqrt(1-(b=b/e-1)*b)+c},easeOutExpo:function(a,b,c,d,e){return b===e?c+d:d*(-Math.pow(2,-10*b/e)+1)+c}}),a.fn[c]=function(d){return this.each(function(){if(!a.data(this,"plugin_"+c)){var e=new b(this,d);a.data(this,"plugin_"+c,e),a.draggable.draggables.push(e)}})},a.draggable={},a.draggable.draggables=[]}),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a){a.fn.popupmenu=function(b,c){function d(b){this.element=a(b),this.init()}var e="popupmenu",f={menuId:null,trigger:"click"},g=a.extend({},f,b);return d.prototype={init:function(){this.configureOptions(),this.addMarkup(),this.handleEvents()},configureOptions:function(){g.invokeMethod&&(g.trigger=g.invokeMethod),g.menu&&(g.menuId=g.menu)},addMarkup:function(){var b=g.menuId;this.menu=a("#"+g.menuId),g.menuId||(this.menu=this.element.next(".popupmenu"),this.menu.attr("id","popupmenu-"+(parseInt(a(".popupmenu").length,10)+1).toString()),b=this.menu.attr("id")),this.menu.removeClass("inforContextMenu").addClass("popupmenu").attr("role","menu").attr("aria-hidden","true"),this.element.attr("aria-haspopup",!0).attr("aria-expanded","false").attr("aria-owns",b),this.menu.find("li").attr("role","presentation"),this.menu.find("a").attr("tabindex","-1").attr("role","menuitem"),this.menu.find("li.is-disabled a, li.disabled a").attr("tabindex","-1").attr("disabled","disabled")},handleEvents:function(){var a=this;("click"===g.trigger||"toggle"===g.trigger)&&this.element.on("click.popupmenu",function(b){a.menu.addClass("is-animated"),a.menu.hasClass("is-open")?a.close():a.open(b)}),"rightClick"===g.trigger&&this.element.on("contextmenu.popupmenu",function(a){return a.preventDefault(),!1}).on("mousedown.popupmenu",function(b){2===b.button&&a.open(b),b.stopPropagation()}),"immediate"===g.trigger&&this.open(),this.element.on("keypress.popupmenu",function(b){"rightClick"===g.trigger&&b.shiftKey&&121===b.keyCode&&a.open(b,!0)})},handleKeys:function(){var b=this;this.menu.on("click.popmenu","a",function(d){var e=a(this);d.preventDefault(),e.find(".inforCheckbox").length>0||(b.close(),c&&e.attr("href")&&c(e.attr("href").substr(1),b.element,b.menu.offset(),a(this)),b.element.trigger("select",[e]))}),a(document).on("keydown.popupmenu",function(c){var d,e="li:not(.popupmenu-seperator):not(.popupmenu-group):not(.is-disabled)";if(27===c.keyCode&&b.close(),9===c.keyCode&&b.close(),32===c.keyCode&&a(c.target).find("input:checkbox").trigger("click"),d=b.menu.find(":focus"),37===c.keyCode&&(c.preventDefault(),d.closest(".popupmenu").length>0&&d.closest(".popupmenu").removeClass("is-open").prev("a").focus()),38===c.keyCode){if(c.preventDefault(),0===d.parent().prevAll(e).length)return void b.menu.parent().find(e).last().find("a").focus();d.parent().prevAll(e).first().find("a").focus()}if(39===c.keyCode&&(c.preventDefault(),d.parent().hasClass("submenu")&&(b.showSubmenu(d.parent()),d.parent().find(".popupmenu a:first").focus())),40===c.keyCode){if(c.preventDefault(),0===d.parent().nextAll(e).length)return void(0===d.length?b.menu.parent().find(e).first().find("a").focus():d.closest(".popupmenu").find(e).first().find("a").focus());d.parent().nextAll(e).first().find("a").focus()}})},position:function(b){var c=void 0===b?this.element:a(b.target).closest(".btn-menu"),d=this.menu.outerWidth(),e=this.menu.outerHeight();this.menu.css("rightClick"===g.trigger?{left:"keypress"===b.type?c.offset().left:b.pageX,top:"keypress"===b.type?c.offset().top:b.pageY}:{left:c.offset().left,top:c.offset().top-(this.menu.parent().length>1?this.menu.parent().offset().top:0)+c.outerHeight()}),this.menu.offset().top+e>a(window).height()&&(this.menu.css({top:a(window).height()-e-(a(window).height()-c.offset().top)}),this.menu.offset().top<0&&(c.offset().top>a(window).height()-c.offset().top+c.outerWidth||(this.menu.css({left:c.offset().left,top:c.offset().top-(this.menu.parent().length>1?this.menu.parent().offset().top:0)+c.outerHeight()}),this.menu.height(a(window).outerHeight()-(this.menu.offset().top+55)+"px").css("overflow","auto")))),this.menu.offset().left+d>a(window).width()&&this.menu.css({left:a(window).width()-d-(a(window).width()-c.offset().left)+c.outerWidth()})},open:function(b){var c=this;this.element.trigger("beforeOpen",[this.menu]),a(".popupmenu").not(this.menu).removeClass("is-open"),this.menu.addClass("is-open").attr("aria-hidden","false"),c.position(b),setTimeout(function(){a(document).on("click.popupmenu",function(b){2!==b.button&&(c.menu.removeClass("is-animated"),0===a(b.target).closest(".popupmenu").length&&c.close())}),a(window).on(" scroll.popupmenu resize.popupmenu",function(){c.close()}),c.element.trigger("beforeOpen",[c.menu])},400),a("iframe").ready(function(){a("iframe").contents().find("body").on("click.popupmenu",function(){c.close()})}),this.handleKeys(),this.element.attr("aria-expanded","true");var d,e,f=0;c.menu.find(".popupmenu").removeClass("is-open").parent().addClass("submenu"),c.menu.find(".submenu").on("mouseenter",function(b){d=b.pageX,c.showSubmenu(a(this)),a(document).on("mousemove.popupmenu",function(a){f=a.pageX})}).on("mouseleave",function(){a(document).off("mousemove.popupmenu"),e=a(this).find("ul"),3.5>f-d&&e.removeClass("is-open")}),c.menu.find("li:not(.popupmenu-seperator):not(.popupmenu-group):not(.is-disabled)").first().find("a").focus()},showSubmenu:function(a){var b=a.find("ul:first");a.parent().find(".submenu > ul").not(a.find("ul")).removeClass("is-open"),b.css({left:a.offset().left+a.width(),top:a.offset().top}).addClass("is-open")},detach:function(){a(document).off("click.popupmenu keydown.popupmenu"),a(window).off("scroll.popupmenu resize.popupmenu"),this.menu.off("click.popmenu"),a("iframe").contents().find("body").off("click.popupmenu")},close:function(){this.menu.removeClass("is-open").attr("aria-hidden","true"),this.menu.css({left:"-999px",height:""}),this.element.trigger("close"),this.element.focus().attr("aria-expanded","false"),this.detach(),"immediate"===g.trigger&&this.destroy()},destroy:function(){a.removeData(this.element[0],e),this.element.off("click.popupmenu keypress.popupmenu contextmenu.popupmenu mousedown.popupmenu"),this.detach()}},this.each(function(){var c=a.data(this,e);c?("function"==typeof c[b]&&c[b](),c.settings=a.extend({},f,b)):c=a.data(this,e,new d(this,g))})}}),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a){a.fn.message=function(b){function c(b){this.element=a(b),this.init()}var d={title:"Message Title",message:"Message Summary",width:"auto",close:null,resize:null,button:[]},e=a.extend({},d,b);return c.prototype={init:function(){var b,c=this;this.message=a('<div class="modal"></div>'),this.messageContent=a('<div class="modal-content"></div>'),this.title=a('<h1 class="modal-title" tabindex="0">'+e.title+"</h3>").appendTo(this.messageContent),this.content=a('<div class="modal-body"><p class="message">'+e.message+"</p></div>").appendTo(this.messageContent),this.element.is("body")||(b=this.element,this.content.empty().append(b.show())),this.closeBtn=a('<button type="button" class="btn-default btn-close">Close</button>').appendTo(this.content),this.message.append(this.messageContent).appendTo("body").modal({trigger:"immediate",buttons:e.buttons,resizable:e.resizable,close:e.close,resize:e.resize}),"auto"!==e.width&&this.content.closest(".modal").css({"max-width":"none",width:e.width}),e.close&&this.content.on("close",function(a){e.close(a,c.content)}),this.message.on("close",function(){b&&b.hide().appendTo("body"),c.message.remove()})}},this.each(function(){new c(this,e)})}}),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a){a.fn.modal=function(b){function c(b){this.element=a(b),this.init()}var d="modal",e={trigger:"click",draggable:!0,resizable:!1,buttons:null},f=a.extend({},e,b);return c.prototype={init:function(){var b=this;this.oldActive=document.activeElement,this.trigger=a('button[ data-modal="'+this.element.attr("id")+'"]'),this.overlay=a('<div class="overlay"></div>'),"click"===f.trigger&&this.trigger.on("click.modal",function(){b.open()}),"immediate"===f.trigger&&setTimeout(function(){b.open()},1),b.isCancelled=!1,this.element.find(".btn-close").on("click.modal",function(){b.close()}),this.element.find(".btn-cancel, .link-cancel").on("click.modal",function(){b.isCancelled=!0,b.close()}),f.buttons&&b.addButtons(f.buttons)},addButtons:function(b){var c=this.element.find(".modal-body"),d=this,e=a('<div class="modal-buttonset"></div>').appendTo(c);e.find("button").remove(),c.find(".btn-default.btn-close").remove(),a.each(b,function(b,c){var f=a('<button type="button" class="btn"></button>');f.text(c.text),c.isDefault&&f.addClass("btn-default"),c.id&&f.attr("id",c.id),f.on("click.modal",function(){return c.click?void c.click.apply(d.element[0],arguments):void d.close()}),e.append(f)})},sizeInner:function(){var b;b=this.element.find(".detailed-message");var c=a(window).height()-b.offset().top-150;b.css({"max-height":c,overflow:"auto",width:b.width()})},open:function(){var b,c=this,d=this.element.triggerHandler("beforeOpen"),e=this.element.find(".modal-body > div").triggerHandler("beforeOpen");return c.isCancelled=!1,d===!1||e===!1?!1:(this.overlay.appendTo("body"),b=c.element.find(".detailed-message"),1===b.length&&(a(window).on("resize.modal",function(){c.sizeInner()}),c.sizeInner()),this.element.addClass("is-visible").attr("role","dialog"),a(".modal").each(function(b){var c=a(this);c.css("z-index","100"+(b+1)),c.data("modal")&&c.data("modal").overlay&&c.data("modal").overlay.css("z-index","100"+b)}),setTimeout(function(){c.element.find(".modal-title").focus(),c.keepFocus(),c.element.triggerHandler("open"),c.element.find(".modal-body > div").triggerHandler("open")},300),a("body > *").not(this.element).attr("aria-hidden","true"),a("body").addClass("modal-engaged"),void a(document).on("keypress.modal",function(b){var d=a(b.target);d.is("textarea")||d.is(":button")||d.is(".dropdown")||13===b.which&&c.isOnTop()&&c.element.find(".btn-default").trigger("click.modal")}))},isOnTop:function(){var b=0,c=this.element;return a(".modal.is-visible").each(function(){b<a(this).css("z-index")&&(b=a(this).css("z-index"))}),b===c.css("z-index")},keepFocus:function(){var b=this,c=a(b.element).find("a[href], area[href], input:not([disabled]),select:not([disabled]), textarea:not([disabled]),button:not([disabled]), iframe, object, embed, *[tabindex],*[contenteditable]"),d=c[0],e=c[c.length-1];a(b.element).on("keypress.modal",function(a){var c=a.which||a.keyCode;27===c&&b.close(),9===c&&(a.target!==e||a.shiftKey?a.target===d&&a.shiftKey&&(a.preventDefault(),e.focus()):(a.preventDefault(),d.focus()))})},close:function(){var b=this.element.triggerHandler("beforeClose"),c=this.element.find(".modal-body > div").first().triggerHandler("beforeClose");b!==!1&&c!==!1&&(this.element.removeClass("is-visible"),a(document).off("keypress.modal"),this.overlay.remove(),a("body").removeClass("modal-engaged"),a("body > *").not(this.element).removeAttr("aria-hidden"),this.element.trigger("close",[this.isCancelled]),this.element.find(".modal-body > div").first().trigger("beforeClose",[this.isCancelled]),this.oldActive&&a(this.oldActive).is("button:visible")?(this.oldActive.focus(),this.oldActive=null):this.trigger.focus())},destroy:function(){this.close(),a.removeData(this.obj,d)}},this.each(function(){var g=a.data(this,d),h=a(this);h.is(".modal")||(g=h.closest(".modal").data(d)),g?("function"==typeof g[b]&&g[b](),g.settings=a.extend({},e,b)):g=a.data(this,d,new c(this,f))})}}),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a){a.fn.tabs=function(b){function c(b){this.element=a(b),this.init()}var d="tabs",e={propertyName:"value"},f=a.extend({},e,b);return c.prototype={init:function(){var b=this,c=null;b.container=a(this.element),b.panels=b.container.children("div").attr({"class":"tab-panel",role:"tabpanel","aria-hidden":"true"}).hide(),b.panels.find("h2:first").attr("tabindex","0"),c=b.container.find("ul:first").attr({"class":"tab-list",role:"tablist","aria-multiselectable":"false"}),b.anchors=c.find("li > a"),b.anchors.each(function(){var c=a(this);c.attr({role:"tab","aria-selected":"false",tabindex:"-1"}).parent().attr("role","presentation").addClass("tab"),c.parent().on("click.tabs",function(){b.activate(a(this).index())}),c.on("click.tabs",function(b){b.preventDefault(),b.stopPropagation(),a(this).parent().trigger("click")}).on("keydown.tabs",function(c){var d=a(this).parent();switch(c.which){case 37:case 38:0!==d.prev().length?d.prev().find(">a").click():b.container.find("li:last>a").click(),c.preventDefault();break;case 39:case 40:0!==d.next().length?d.next().find(">a").click():b.container.find("li:first>a").click(),c.preventDefault()}})}),b.activate(0)},activate:function(b){var c=this,d=c.anchors.eq(b),e={newTab:d.parent(),oldTab:c.anchors.parents().find(".is-selected"),panels:c.panels.eq(d.parent().index()),oldPanel:c.panels.filter(":visible")},f=c.element.trigger("beforeActivate",null,e);f&&(c.anchors.attr({"aria-selected":"false",tabindex:"-1"}).parent().removeClass("is-selected"),c.panels.hide(),d.attr({"aria-selected":"true",tabindex:"0"}).parent().addClass("is-selected"),e.panels.attr("aria-hidden","false").stop().fadeIn(function(){c.element.trigger("activate",null,e)}),e.panels.find(".autoLabelWidth").each(function(){var b=a(this),c=b.find(".inforLabel");c.autoWidth&&c.autoWidth()}),e.panels.find(":first-child").filter("h3").attr("tabindex","0"),d.focus(),c._setOveflow())},_setOveflow:function(){},destroy:function(){a.removeData(this.obj,d)}},this.each(function(){var g=a.data(this,d);g?g.settings=a.extend({},e,b):g=a.data(this,d,new c(this,f))})}}),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(window.jQuery||window.Zepto)}(function(a){a.fn.tooltip=function(b,c){function d(b){this.element=a(b),this.init()}var e="tooltip",f={content:null,offset:20,placement:"bottom",trigger:"hover",title:null,popover:null,isError:!1},g=a.extend({},f,b);return d.prototype={init:function(){this.appendTooltip(),this.handleEvents(),this.addAria(),this.isPopover=null!==g.content&&"object"==typeof g.content||g.popover},addAria:function(){this.content=this.element.attr("title"),this.element.removeAttr("title").attr("aria-describedby","tooltip"),this.isPopover&&"click"===g.trigger&&this.element.attr("aria-haspopup",!0)},appendTooltip:function(){this.tooltip=a("#tooltip"),0===this.tooltip.length&&(this.tooltip=a('<div class="tooltip bottom is-hidden" role="tooltip" id="tooltip"><div class="arrow"></div><div class="tooltip-content"><p>(Content)</p></div></div>').appendTo("body"))},handleEvents:function(){var a,b=this,c=400;"hover"!==g.trigger||g.isError||this.element.on("mouseenter.tooltip",function(){a=setTimeout(function(){b.show()},c)}).on("mouseleave.tooltip mousedown.tooltip",function(){clearTimeout(a),setTimeout(function(){b.hide()},c)}),"click"===g.trigger&&this.element.on("click.tooltip",function(){b.tooltip.hasClass("is-hidden")?b.show():b.hide()}),this.element.on("focus.tooltip, click.tooltip",function(){b.isPopover||b.setContent(b.content)})},setContent:function(b){if(this.isPopover){if(this.tooltip.find(".tooltip-content").html(g.content),this.tooltip.addClass("popover"),null!==g.title){var c=this.tooltip.find(".tooltip-title");0===c.length&&(c=a('<div class="tooltip-title"></div>').prependTo(this.tooltip)),c.html(g.title)}}else this.tooltip.removeClass("popover"),"function"==typeof g.content&&(b=this.content=g.content.call(this.element)),this.tooltip.find(".tooltip-content").html("<p>"+(void 0===b?"(Content)":b)+"</p>")},show:function(){var b=this;this.isInPopup=!1,this.setContent(this.content),this.element.trigger("beforeOpen",[this.tooltip]),this.tooltip.removeClass("bottom right left top is-error").addClass(g.placement),this.position(),g.isError&&this.tooltip.addClass("is-error"),this.tooltip.removeClass("is-hidden"),this.element.trigger("open",[this.tooltip]),setTimeout(function(){a(document).on("click.tooltip",function(c){g.isError||0===a(c.target).closest(".popover").length&&0===a(c.target).closest(".dropdown-list").length&&b.hide()}).on("keydown.tooltip",function(a){(27===a.which||g.isError)&&b.hide()}),a(window).on("resize.tooltip",function(){b.hide()})},400),b.isPopover&&this.tooltip.on("mouseenter.tooltip",function(){b.isInPopup=!0}).on("mouseleave.tooltip",function(c){return b.isInPopup=!1,a(c.relatedTarget).is(".dropdown-list, .dropdown-option")?!1:void setTimeout(function(){b.isInPopup||(console.log(c.relatedTarget),b.hide())},400)})},position:function(){"bottom"===g.placement&&this.tooltip.css({top:this.element.offset().top+this.element.outerHeight()+g.offset,left:this.element.offset().left+this.element.outerWidth()/2-this.tooltip.outerWidth()/2}),"top"===g.placement&&this.tooltip.css({top:this.element.offset().top-g.offset-this.tooltip.height(),left:this.element.offset().left+this.element.outerWidth()/2-this.tooltip.outerWidth()/2}),"right"===g.placement&&this.tooltip.css({top:this.element.offset().top-this.tooltip.height()/2+this.element.outerHeight()/2,left:this.element.offset().left+this.element.outerWidth()+g.offset})},hide:function(){this.isInPopup||(this.tooltip.addClass("is-hidden"),a(document).off("click.tooltip"),a(window).off("resize.tooltip"),this.element.trigger("close",[this.tooltip]))},destroy:function(){this.element.removeData(e),this.hide(),this.element.off("mouseenter.tooltip mouseleave.tooltip mousedown.tooltip click.tooltip")}},this.each(function(){var h=a.data(this,e);h?("function"==typeof h[b]&&h[b](c),h.settings=a.extend({},f,b)):h=a.data(this,e,new d(this,g))})},a.fn.inforToolTip=a.fn.tooltip,a.fn.popover=a.fn.tooltip}),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a){a.fn.slider=function(b){function c(b){this.element=a(b),this.init()}var d="slider",e={value:0},f=a.extend({},e,b);return c.prototype={init:function(){var b=this,c=function(c){var d=a(c.el).position().left+b.handles.width();b.value(d)};b.handles=b.element.find(".slider-handle"),b.range=b.element.find(".slider-range"),b.value(f.value),b.handles.draggable({constrainTo:"parent",axis:"x"}).on("click.slider",function(a){a.preventDefault()}).on("drag.slider",function(a,b){c(b)}).on("easing.slider",function(a,b){c(b)})},value:function(a){var b=this,c=0;return b._value=a,c=(b._value-b.handles.width()/2)/parseInt(b.element.css("width"),10)*100,b.range.css("width",c+"%"),b._value},destroy:function(){a.removeData(this.obj,d)}},this.each(function(){var g=a.data(this,d);g?("function"==typeof g[b]&&g[b](),g.settings=a.extend({},e,b)):g=a.data(this,d,new c(this,f))})}});
//# sourceMappingURL=gramercy.map