
<div class="row">
  <div class="twelve columns">
    <div id="datagrid">
    </div>
  </div>
</div>

<script>
  var datagrid, columns = [], data = [], beginIndex, endIndex;

  $('body').one('initialized', function () {

    //Init and get the api for the grid
    var grid = $('#datagrid').datagrid({
      columns: columns,
      selectable: 'single',
      paging: true,
      pagesize: 10,
      pagesizes: [5, 10, 15],
      indeterminate: true,
      toolbar: {title: 'Data Grid Header Title', results: true, dateFilter: false ,keywordFilter: true, advancedFilter: true, actions: true, views: true, rowHeight: true},

      source: function(req, response) {

        // compute the beginIndex and endIndex as a way to slice the data into 'pages'.
        // This pageData mimics what the data would be like when retrieved from the back end.
        switch (req.type) {
          case 'initial': beginIndex = 0; break;
          case 'first': beginIndex = 0; break;
          case 'last': beginIndex = data.length - req.pagesize; break;
          case 'next': beginIndex = beginIndex + req.pagesize; break;
          case 'prev': beginIndex = beginIndex - req.pagesize; break;

          case 'sorted': console.log('sorted stub called - implement me'); break;
          case 'filtered': console.log('filtered stub called - implement me'); break;
        }

        endIndex = beginIndex + req.pagesize;

        // slice out the page of data we want to display
        var pageData = data.slice(beginIndex, endIndex);

        // update the firstPage and lastPage booleans so the paging controls
        // will enable and disable correctly.
        req.firstPage = beginIndex === 0;
        req.lastPage = endIndex >= data.length - 1;

        // Get the currently selected row on this page so it can be set as teh
        // selected row on the last page.
        var selectedIndex = -1;
        var selectedRow = datagrid.selectedRows();
        if (selectedRow && selectedRow.length > 0 && selectedRow[0].idx !== -1) {
          selectedIndex = selectedRow[0].idx;
          datagrid.unSelectAllRows();
        }

        // send the data to the data grid
        response(pageData, req);

        // reset the selected row
        console.log(selectedIndex)
        datagrid.selectRow(selectedIndex === -1 ? 0 : selectedIndex);
      }
    });

    datagrid = grid.data('datagrid');
  });

  //Define Columns for the Grid.
  columns.push({ id: 'selectionCheckbox', sortable: false, resizable: false, width: 50, formatter: Formatters.SelectionCheckbox, align: 'center' });
  columns.push({ id: 'productId', name: 'Product Id', field: 'productId', width: 140, formatter: Formatters.Readonly});
  columns.push({ id: 'productName', name: 'Product Name', sortable: false, field: 'productName', width: 150, formatter: Formatters.Hyperlink});
  columns.push({ id: 'activity', hidden: true, name: 'Activity', field: 'activity', width: 125});
  columns.push({ id: 'quantity', name: 'Quantity', field: 'quantity', width: 125});
  columns.push({ id: 'price', name: 'Price', field: 'price', width: 125, formatter: Formatters.Decimal});
  columns.push({ id: 'orderDate', name: 'Order Date', field: 'orderDate', formatter: Formatters.Date, dateFormat: 'M/d/yyyy'});

  // Some Sample Data
  data.push({ id: 1, productId: 2142201, productName: 'Compressor', activity:  'Assemble Paint', quantity: 1, price: 210.99, status: 'OK', orderDate: new Date(2014, 12, 8), action: 'Action'});
  data.push({ id: 2, productId: 2241202, productName: 'Different Compressor', activity:  'Inspect and Repair', quantity: 2, price: 210.99, status: '', orderDate: new Date(2015, 7, 3), action: 'On Hold'});
  data.push({ id: 3, productId: 2342203, productName: 'Compressor', activity:  'Inspect and Repair', quantity: 1, price: 120.99, status: null, orderDate: new Date(2014, 6, 3), action: 'Action'});
  data.push({ id: 4, productId: 2445204, productName: 'Another Compressor', activity:  'Assemble Paint', quantity: 3, price: 210.99, status: 'OK', orderDate: new Date(2015, 3, 3), action: 'Action'});
  data.push({ id: 5, productId: 2542205, productName: 'I Love Compressors', activity:  'Inspect and Repair', quantity: 4, price: 210.99, status: 'OK', orderDate: new Date(2015, 5, 5), action: 'On Hold'});
  data.push({ id: 5, productId: 2642205, productName: 'Air Compressors', activity:  'Inspect and Repair', quantity: 41, price: 120.99, status: 'OK', orderDate: new Date(2014, 6, 9), action: 'On Hold'});
  data.push({ id: 6, productId: 2642206, productName: 'Some Compressor', activity:  'inspect and Repair', quantity: 41, price: 123.99, status: 'OK', orderDate: new Date(2014, 6, 9), action: 'On Hold'});
  data.push({
    id:          7,
    productId:   214227,
    productName: 'Compressor 8',
    activity:    'Assemble Paint',
    quantity:    4.5,
    price:       203.99,
    status:      'On Hold',
    orderDate:   '2015-01-08T06:00:00.000Z',
    action:      'Action'
  });
  data.push({
    id:          8,
    productId:   214228,
    productName: 'Compressor 9',
    activity:    'Assemble Paint',
    quantity:    5,
    price:       202.99,
    status:      'On Hold',
    orderDate:   '2015-01-09T06:00:00.000Z',
    action:      'Action'
  });
  data.push({
    id:          9,
    productId:   214229,
    productName: 'Compressor 10',
    activity:    'Assemble Paint',
    quantity:    5.5,
    price:       201.99,
    status:      'On Hold',
    orderDate:   '2015-01-10T06:00:00.000Z',
    action:      'Action'
  });
  data.push({
    id:          10,
    productId:   214230,
    productName: 'Compressor 1',
    activity:    'Assemble Paint',
    quantity:    6,
    price:       200.99,
    orderDate:   '2015-01-01T06:00:00.000Z',
    action:      'Action'
  });
  data.push({
    id:          11,
    productId:   214231,
    productName: 'Compressor 2',
    activity:    'Assemble Paint',
    quantity:    6.5,
    price:       199.99,
    status:      'Late',
    orderDate:   '2015-01-02T06:00:00.000Z',
    action:      'Action'
  });
  data.push({
    id:          12,
    productId:   214232,
    productName: 'Compressor 3',
    activity:    'Assemble Paint',
    quantity:    7,
    price:       198.99,
    status:      'Active',
    orderDate:   '2015-01-03T06:00:00.000Z',
    action:      'Action'
  });
  data.push({
    id:          13,
    productId:   214233,
    productName: 'Compressor 4',
    activity:    'Assemble Paint',
    quantity:    7.5,
    price:       197.99,
    status:      'Inactive',
    orderDate:   '2015-01-04T06:00:00.000Z',
    action:      'Action'
  });
  data.push({
    id:          14,
    productId:   214234,
    productName: 'Compressor 5',
    activity:    'Assemble Paint',
    quantity:    8,
    price:       196.99,
    status:      'Inactive',
    orderDate:   '2015-01-05T06:00:00.000Z',
    action:      'Action'
  });
  data.push({
    id:          15,
    productId:   214235,
    productName: 'Compressor 6',
    activity:    'Assemble Paint',
    quantity:    8.5,
    price:       195.99,
    status:      'Inactive',
    orderDate:   '2015-01-06T06:00:00.000Z',
    action:      'Action'
  });
  data.push({
    id:          16,
    productId:   214236,
    productName: 'Compressor 7',
    activity:    'Assemble Paint',
    quantity:    9,
    price:       194.99,
    status:      'On Hold',
    orderDate:   '2015-01-07T06:00:00.000Z',
    action:      'Action'
  });
  data.push({
    id:          17,
    productId:   214237,
    productName: 'Compressor 8',
    activity:    'Assemble Paint',
    quantity:    9.5,
    price:       193.99,
    status:      'On Hold',
    orderDate:   '2015-01-08T06:00:00.000Z',
    action:      'Action'
  });
  data.push({
    id:          18,
    productId:   214238,
    productName: 'Compressor 9',
    activity:    'Assemble Paint',
    quantity:    10,
    price:       192.99,
    status:      'On Hold',
    orderDate:   '2015-01-09T06:00:00.000Z',
    action:      'Action'
  });
  data.push({
    id:          19,
    productId:   214239,
    productName: 'Compressor 10',
    activity:    'Assemble Paint',
    quantity:    10.5,
    price:       191.99,
    status:      'On Hold',
    orderDate:   '2015-01-10T06:00:00.000Z',
    action:      'Action'
  });
  data.push({
    id:          20,
    productId:   214240,
    productName: 'Compressor 1',
    activity:    'Assemble Paint',
    quantity:    11,
    price:       190.99,
    orderDate:   '2015-01-01T06:00:00.000Z',
    action:      'Action'
  });
  data.push({
    id:          21,
    productId:   214241,
    productName: 'Compressor 2',
    activity:    'Assemble Paint',
    quantity:    11.5,
    price:       189.99,
    status:      'Late',
    orderDate:   '2015-01-02T06:00:00.000Z',
    action:      'Action'
  });
  data.push({
    id:          22,
    productId:   214242,
    productName: 'Compressor 3',
    activity:    'Assemble Paint',
    quantity:    12,
    price:       188.99,
    status:      'Active',
    orderDate:   '2015-01-03T06:00:00.000Z',
    action:      'Action'
  });
  data.push({
    id:          23,
    productId:   214243,
    productName: 'Compressor 4',
    activity:    'Assemble Paint',
    quantity:    12.5,
    price:       187.99,
    status:      'Inactive',
    orderDate:   '2015-01-04T06:00:00.000Z',
    action:      'Action'
  });
  data.push({
    id:          24,
    productId:   214244,
    productName: 'Compressor 5',
    activity:    'Assemble Paint',
    quantity:    13,
    price:       186.99,
    status:      'Inactive',
    orderDate:   '2015-01-05T06:00:00.000Z',
    action:      'Action'
  });
  data.push({
    id:          25,
    productId:   214245,
    productName: 'Compressor 6',
    activity:    'Assemble Paint',
    quantity:    13.5,
    price:       185.99,
    status:      'Inactive',
    orderDate:   '2015-01-06T06:00:00.000Z',
    action:      'Action'
  });
  data.push({
    id:          26,
    productId:   214246,
    productName: 'Compressor 7',
    activity:    'Assemble Paint',
    quantity:    14,
    price:       184.99,
    status:      'On Hold',
    orderDate:   '2015-01-07T06:00:00.000Z',
    action:      'Action'
  });
  data.push({
    id:          27,
    productId:   214247,
    productName: 'Compressor 8',
    activity:    'Assemble Paint',
    quantity:    14.5,
    price:       183.99,
    status:      'On Hold',
    orderDate:   '2015-01-08T06:00:00.000Z',
    action:      'Action'
  });
  data.push({
    id:          28,
    productId:   214248,
    productName: 'Compressor 9',
    activity:    'Assemble Paint',
    quantity:    15,
    price:       182.99,
    status:      'On Hold',
    orderDate:   '2015-01-09T06:00:00.000Z',
    action:      'Action'
  });
  data.push({
    id:          29,
    productId:   214249,
    productName: 'Compressor 10',
    activity:    'Assemble Paint',
    quantity:    15.5,
    price:       181.99,
    status:      'On Hold',
    orderDate:   '2015-01-10T06:00:00.000Z',
    action:      'Action'
  });
  data.push({
    id:          30,
    productId:   214250,
    productName: 'Compressor 1',
    activity:    'Assemble Paint',
    quantity:    16,
    price:       180.99,
    orderDate:   '2015-01-01T06:00:00.000Z',
    action:      'Action'
  });
  data.push({
    id:          31,
    productId:   214251,
    productName: 'Compressor 2',
    activity:    'Assemble Paint',
    quantity:    16.5,
    price:       179.99,
    status:      'Late',
    orderDate:   '2015-01-02T06:00:00.000Z',
    action:      'Action'
  });
  data.push({
    id:          32,
    productId:   214252,
    productName: 'Compressor 3',
    activity:    'Assemble Paint',
    quantity:    17,
    price:       178.99,
    status:      'Active',
    orderDate:   '2015-01-03T06:00:00.000Z',
    action:      'Action'
  });
  data.push({
    id:          33,
    productId:   214253,
    productName: 'Compressor 4',
    activity:    'Assemble Paint',
    quantity:    17.5,
    price:       177.99,
    status:      'Inactive',
    orderDate:   '2015-01-04T06:00:00.000Z',
    action:      'Action'
  });
  data.push({
    id:          34,
    productId:   214254,
    productName: 'Compressor 5',
    activity:    'Assemble Paint',
    quantity:    18,
    price:       176.99,
    status:      'Inactive',
    orderDate:   '2015-01-05T06:00:00.000Z',
    action:      'Action'
  });
  data.push({
    id:          35,
    productId:   214255,
    productName: 'Compressor 6',
    activity:    'Assemble Paint',
    quantity:    18.5,
    price:       175.99,
    status:      'Inactive',
    orderDate:   '2015-01-06T06:00:00.000Z',
    action:      'Action'
  });
</script>
