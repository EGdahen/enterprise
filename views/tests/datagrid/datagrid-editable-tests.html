
<div class="page-container scrollable" id="maincontent" role="main">

  <div class="row">
    <div class="twelve columns">
      <div role="toolbar" class="toolbar">

      <div id="datagrid">

      </div>
    </div>
  </div>

  <script>
    var gridApi = null;

    $('body').one('initialized', function () {
           var grid,
            columns = [],
            data = [];

          // Some Sample Data
          data.push({ id: 1, productId: 2142201, productName: 'Compressor', activity:  '<svg/onload=alert(1)>', quantity: 1, price: 210.99, status: 'OK', orderDate:  new Date(), portable: false, action: 'ac', description: 'Compressor comes with various air compressor accessories, to help you with a variety of projects. All fittings are with 1/4 NPT connectors. The kit has an air blow gun that can be used for cleaning'});

          //Define Columns for the Grid.
          columns.push({ id: 'selectionCheckbox', sortable: false, resizable: false, formatter: Formatters.SelectionCheckbox, align: 'center'});
          columns.push({ id: 'rowStatus', resizable: false, formatter: Formatters.Status, align: 'center'});
          columns.push({ id: 'id', name: 'Row Id', field: 'id', formatter: Formatters.Readonly});
          columns.push({ id: 'productName', name: 'Product Name', sortable: false, field: 'productName', formatter: Formatters.Hyperlink, editor: Editors.Input});
          columns.push({ id: 'activity', name: 'Activity', field: 'activity', editor: Editors.Input});
          columns.push({ id: 'quantity', name: 'Quantity', field: 'quantity', align: 'right', editor: Editors.Input, mask: '###', isEditable: function (row) {
              //For this fake logic just disable odd rows
              return (row % 2 === 0);
            }});
          columns.push({ id: 'portable', name: 'Portable', field: 'portable', align: 'center', formatter: Formatters.Checkbox, editor: Editors.Checkbox});
          columns.push({ id: 'price', name: 'Price', field: 'price', align: 'right', formatter: Formatters.Decimal, numberFormat: {minimumFractionDigits: 3, maximumFractionDigits: 3}, editor: Editors.Input, mask: '####,00'});
          columns.push({ id: 'orderDate', name: 'Order Date', field: 'orderDate', formatter: Formatters.Date, editor: Editors.Date, dateFormat : 'MM-dd-yyyy'});
          columns.push({ id: 'action', name: 'Action', field: 'action', align: 'center', formatter: Formatters.Dropdown, editor: Editors.Dropdown,
            options: [{id: 'oh1', label: 'On Hold', value: 'oh'}, {id: 'sh1', label: 'Shipped', value: 'sh'} , {id: 'ac1', label: 'Action', value: 'ac'}]
            });

          //Init and get the api for the grid
          grid = $('#datagrid').datagrid({
            columns: columns,
            dataset: data,
            editable: true,
            clickToSelect: false,
            selectable: 'multiple',
            toolbar: {keywordFilter: true, results: true}
          }).on('cellchange', function (e, args) {
            console.log(e, args);
          }).on('rowadd', function (e, args) {
            console.log(e, args);
          }).on('rowremove', function (e, args) {
            console.log(e, args);
          });

          gridApi = $('#datagrid').data('datagrid');

          //Example row status
          gridApi.rowStatus(0, 'error', 'Error');

    });

    var newId = 8;
    //Add Code for Add and icon-delete
    $('#add-btn').on('click', function () {
      gridApi.addRow({ id: newId++, productId: 2642206, productName: 'New Product'});
      console.log(gridApi.settings.dataset[1])
    });

    //Add Code for Add and icon-delete
    $('#remove-btn').on('click', function () {
      gridApi.removeSelected();
    });
  </script>
</div>
</div>
