<div class="row">
  <div class="six columns">
    <h2>Accordion Test: Expand on Initialization</h2>
    <p>It should be possible to expand an accordion down to a nested header during its initialization.</p>
    <p>This test applies api method "expand" to a nested header to open it.</p>
    <p>Time Until Expand Completes: <span id="time-display" style="font-weight: bold;">300</span></p>
  </div>
</div>

<div class="row">
  <div class="six columns">

    <div id="nested-accordion" class="accordion panel alternate">
      <div class="accordion-header">
        <a href="#"><span>Item 1</span></a>
      </div>
      <div class="accordion-pane">
        <div class="accordion-header">
          <a href="#"><span>Property #1</span></a>
        </div>
        <div class="accordion-pane">
          <div class="accordion-header">
            <a href="#"><span>Sub-Property #1</span></a>
          </div>
          <div class="accordion-pane">
            <div class="accordion-content">
              <h3>Information</h3>
              <p>This is a sub-property</p>
            </div>
          </div>

          <div class="accordion-header">
            <a href="#"><span>Sub-Property #2</span></a>
          </div>
          <div class="accordion-pane">
            <div class="accordion-content">
              <h3>Information</h3>
              <p>This is a sub-property</p>
            </div>
          </div>

          <div class="accordion-header">
            <a href="#"><span>Sub-Property #3</span></a>
          </div>
          <div class="accordion-pane">
            <div class="accordion-content">
              <h3>Information</h3>
              <p>This is a sub-property</p>
            </div>
          </div>
        </div>

        <div class="accordion-header">
          <a href="#"><span>Property #2</span></a>
        </div>
        <div class="accordion-pane">
          <div class="accordion-header">
            <a href="#"><span>Sub-Property #1</span></a>
          </div>
          <div class="accordion-pane">
            <div class="accordion-content">
              <h3>Information</h3>
              <p>This is a sub-property</p>
            </div>
          </div>

          <div class="accordion-header">
            <a href="#"><span>Sub-Property #2</span></a>
          </div>
          <div class="accordion-pane">
            <div class="accordion-content">
              <h3>Information</h3>
              <p>This is a sub-property</p>
            </div>
          </div>

          <div class="accordion-header">
            <a href="#"><span>Sub-Property #3</span></a>
          </div>
          <div class="accordion-pane">
            <div class="accordion-content">
              <h3>Information</h3>
              <p>This is a sub-property</p>
            </div>
          </div>
        </div>

        <div class="accordion-header">
          <a href="#"><span>Property #2</span></a>
        </div>
        <div class="accordion-pane">
          <div class="accordion-header">
            <a href="#"><span>Sub-Property #1</span></a>
          </div>
          <div class="accordion-pane">
            <div class="accordion-content">
              <h3>Information</h3>
              <p>This is a sub-property</p>
            </div>
          </div>

          <div class="accordion-header">
            <a href="#"><span>Sub-Property #2</span></a>
          </div>
          <div class="accordion-pane">
            <div class="accordion-content">
              <h3>Information</h3>
              <p>This is a sub-property</p>
            </div>
          </div>

          <div class="accordion-header">
            <a href="#"><span>Sub-Property #3</span></a>
          </div>
          <div class="accordion-pane">
            <div class="accordion-content">
              <h3>Information</h3>
              <p>This is a sub-property</p>
            </div>
          </div>
        </div>
      </div>

      <div class="accordion-header">
        <a href="#"><span>Item 2</span></a>
      </div>
      <div class="accordion-pane">
        <div class="accordion-header">
          <a href="#"><span>Property #1</span></a>
        </div>
        <div class="accordion-pane">
          <div class="accordion-header">
            <a href="#"><span>Sub-Property #1</span></a>
          </div>
          <div class="accordion-pane">
            <div class="accordion-content">
              <h3>Information</h3>
              <p>This is a sub-property</p>
            </div>
          </div>

          <div class="accordion-header">
            <a href="#"><span>Sub-Property #2</span></a>
          </div>
          <div class="accordion-pane">
            <div class="accordion-content">
              <h3>Information</h3>
              <p>This is a sub-property</p>
            </div>
          </div>

          <div class="accordion-header">
            <a href="#"><span>Sub-Property #3</span></a>
          </div>
          <div class="accordion-pane">
            <div class="accordion-content">
              <h3>Information</h3>
              <p>This is a sub-property</p>
            </div>
          </div>
        </div>

        <div class="accordion-header">
          <a href="#"><span>Property #2</span></a>
        </div>
        <div class="accordion-pane">
          <div class="accordion-header">
            <a href="#"><span>Sub-Property #1</span></a>
          </div>
          <div class="accordion-pane">
            <div class="accordion-content">
              <h3>Information</h3>
              <p>This is a sub-property</p>
            </div>
          </div>

          <div class="accordion-header">
            <a href="#"><span>Sub-Property #2</span></a>
          </div>
          <div class="accordion-pane">
            <div class="accordion-content">
              <h3>Information</h3>
              <p>This is a sub-property</p>
            </div>
          </div>

          <div class="accordion-header">
            <a href="#"><span>Sub-Property #3</span></a>
          </div>
          <div class="accordion-pane">
            <div class="accordion-content">
              <h3>Information</h3>
              <p>This is a sub-property</p>
            </div>
          </div>
        </div>

        <div class="accordion-header">
          <a href="#"><span>Property #2</span></a>
        </div>
        <div class="accordion-pane">
          <div class="accordion-header">
            <a href="#"><span>Sub-Property #1</span></a>
          </div>
          <div class="accordion-pane">
            <div class="accordion-content">
              <h3>Information</h3>
              <p>This is a sub-property</p>
            </div>
          </div>

          <div class="accordion-header">
            <a href="#"><span>Sub-Property #2</span></a>
          </div>
          <div class="accordion-pane">
            <div class="accordion-content">
              <h3>Information</h3>
              <p>This is a sub-property</p>
            </div>
          </div>

          <div class="accordion-header">
            <a href="#"><span>Sub-Property #3</span></a>
          </div>
          <div class="accordion-pane">
            <div class="accordion-content">
              <h3>Information</h3>
              <p>This is a sub-property</p>
            </div>
          </div>
        </div>

      </div>
    </div>

  </div>
</div>

<script type="text/javascript">
  $('body').on('initialized', function() {

    var elem = $('#nested-accordion'),
      headerToExpand = elem.find('.accordion-header').eq(0),
      api = elem.data('accordion'),

      // Test to show some delay
      counter = 300,
      countDown = function () {
        counter = counter - 1;
        $('#time-display').text(counter);
        if (counter > 0) {
          return window.requestAnimationFrame(countDown);
        }
        // When Ready, call api expand
        api.expand(headerToExpand);
      };

    // Start the countdown
    $('#time-display').text(counter);
    window.requestAnimationFrame(countDown);

  });
</script>
