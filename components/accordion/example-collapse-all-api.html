<div class="row">
  <div class="six columns">
    <h2>Accordion Example: <span class="code">collapseAll()</span> API</h2>
    <p><a class="hyperlink" href="http://jira.infor.com/browse/SOHO-6055" target="_blank">Related JIRA Ticket</a>.</p>
    <p>Demonstration of the <span class="code">collapseAll()</span> API that will automatically collapse all expanded accordion headers.</p>
    <p>Time Until Expand Completes: <span id="time-display" style="font-weight: bold;">300</span></p>
  </div>
</div>

<div class="row">
  <div class="six columns">

    <div id="test-accordion" data-options="{allowOnePane: false}" class="accordion panel alternate">
      <div class="accordion-header is-expanded">
        <a href="#"><span>Item 1</span></a>
      </div>
      <div class="accordion-pane">
        <div class="accordion-header">
          <a href="#"><span>Property #1</span></a>
        </div>
        <div class="accordion-header">
          <a href="#"><span>Property #2</span></a>
        </div>
        <div class="accordion-header">
          <a href="#"><span>Property #3</span></a>
        </div>
      </div>

      <div class="accordion-header is-expanded">
        <a href="#"><span>Item 2</span></a>
      </div>
      <div class="accordion-pane">
        <div class="accordion-header">
          <a href="#"><span>Property #1</span></a>
        </div>
        <div class="accordion-header">
          <a href="#"><span>Property #2</span></a>
        </div>
      </div>

      <div class="accordion-header is-expanded">
        <a href="#"><span>Item 3</span></a>
      </div>
      <div class="accordion-pane">
        <div class="accordion-header is-expanded">
          <a href="#"><span>Property #1</span></a>
        </div>
        <div class="accordion-pane">
          <div class="accordion-header">
            <a href="#"><span>Sub-Property #1</span></a>
          </div>
          <div class="accordion-header">
            <a href="#"><span>Sub-Property #2</span></a>
          </div>
          <div class="accordion-header">
            <a href="#"><span>Sub-Property #3</span></a>
          </div>
        </div>
        <div class="accordion-header is-expanded">
          <a href="#"><span>Property #2</span></a>
        </div>
        <div class="accordion-pane">
          <div class="accordion-header">
            <a href="#"><span>Sub-Property #1</span></a>
          </div>
          <div class="accordion-header">
            <a href="#"><span>Sub-Property #2</span></a>
          </div>
          <div class="accordion-header">
            <a href="#"><span>Sub-Property #3</span></a>
          </div>
        </div>
      </div>
    </div>

  </div>
</div>

<script type="text/javascript">
  $('body').on('initialized', function() {
    var elem = $('#test-accordion'),
      api = elem.data('accordion'),

      // Test to show some delay
      counter = 300,
      countDown = function () {
        counter = counter - 1;
        $('#time-display').text(counter);
        if (counter > 0) {
          return window.requestAnimationFrame(countDown);
        }
        // When Ready, call api expand
        api.collapseAll();
      };

    // Start the countdown
    $('#time-display').text(counter);
    window.requestAnimationFrame(countDown);
  });
</script>
