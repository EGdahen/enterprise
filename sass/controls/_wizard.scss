// Wizard Control
//================================================== //

// NOTE: See also "_header.scss" for Wizard styles that are specific to the header control.

//Internal Variables
$wizard-height: 164px;
$wizard-tick-border-width: 4px;
$wizard-tick-size: 18px;
$wizard-focus-state-size: ($wizard-tick-size * 1.5);

.wizard-header {
  background-color: $wizard-default-bg;
  padding: (($wizard-height/2) - $wizard-tick-border-width) ($wizard-height/4);
  position: relative;

  .bar {
    background-color: $wizard-bar-bg;
    height: 4px;
    position: relative;
  }

  .completed-range {
    background-color: $wizard-active-color;
    height: 4px;
    left: 0;
    position: absolute;
    top: 0;
    @include transition(width 200ms cubic-bezier(.17, .04, .03, .94));
    width: 0%;
  }

  .tick {
    background-color: $wizard-default-bg;
    border-radius: ($wizard-tick-size/2);
    display: inline-block;
    height: $wizard-tick-size;
    margin-left: -4px;
    margin-top: -($wizard-tick-size/2) + ($wizard-tick-border-width/2);
    position: absolute;
    width: $wizard-tick-size;

    // Border for incomplete or non-current ticks
    &::after {
      border: $wizard-tick-border-width solid $wizard-bar-bg;
      border-radius: ($wizard-tick-size/2);
      content: '';
      height: $wizard-tick-size - $wizard-tick-border-width*2;
      left: 0;
      position: absolute;
      top: 0;
      @include transition(border 200ms cubic-bezier(.17, .04, .03, .94),
        left 200ms cubic-bezier(.17, .04, .03, .94),
        top 200ms cubic-bezier(.17, .04, .03, .94));
      width: $wizard-tick-size - ($wizard-tick-border-width * 2);
    }

    // Default Placement for Focus State
    &::before {
      border: 1px solid rgba($wizard-active-color, 0);
      border-radius: 0;
      content: '';
      height: 0;
      left: $wizard-tick-size/2;
      position: absolute;
      top: $wizard-tick-size/2;
      @include transition(border 200ms cubic-bezier(.17, .04, .03, .94),
        border-radius 200ms cubic-bezier(.17, .04, .03, .94),
        height 200ms cubic-bezier(.17, .04, .03, .94),
        left 200ms cubic-bezier(.17, .04, .03, .94),
        top 200ms cubic-bezier(.17, .04, .03, .94),
        width 200ms cubic-bezier(.17, .04, .03, .94));
      width: 0;
    }

    &:focus::before {
      border: 1px solid rgba($wizard-active-color, 1);
      border-radius: ($wizard-focus-state-size/2) + $wizard-tick-border-width;
      height: $wizard-focus-state-size;
      left: -.5em;
      top: -.5em;
      width: $wizard-focus-state-size;
    }

    .label {
      color: $font-color-lowcontrast;
      position: absolute;
      top: -($wizard-tick-size * 2);
      white-space: nowrap;
    }

    &.current,
    &.complete {
      &::after {
        border: 0;
        left: $wizard-tick-border-width;
        top: $wizard-tick-border-width;
      }

      .label {
        top: -($wizard-tick-size * 2);
      }
    }

    &.current {
      background-color: $wizard-active-color;
      border-radius: 50%;
      color: $wizard-active-color;

      .label {
        color: $wizard-active-color;
      }
    }

    &.complete {
      background-color: $wizard-active-color;
      color: $font-color-extrahighcontrast;

      .label {
        color: $font-color-extrahighcontrast;
      }
    }
  }
}

// Styles used by the Header Wizard Control
$header-wizard-bar: $slate08;
$header-wizard-inactive-color: $slate03;
$header-wizard-active-color: $white;

.header {
  .wizard {
    margin: 0 20px;
  }

  .wizard-header {
    background-color: transparent;
    padding: (($wizard-height/8) - $wizard-tick-border-width) ($wizard-height/4) (($wizard-height/4) - $wizard-tick-border-width);

    .bar {
      background-color: $header-wizard-bar;
    }

    .completed-range {
      background-color: $header-wizard-active-color;
    }

    .tick {
      background-color: $header-bg-color;

      &::after {
        border: $wizard-tick-border-width solid $header-wizard-bar;
      }

      &::before {
        border: 1px solid rgba($header-wizard-active-color, 0);
      }

      &:focus {
        &::before {
          border: 1px solid rgba($header-wizard-active-color, 1);
        }
      }

      .label {
        color: $header-wizard-inactive-color;
        top: $wizard-tick-size * 2;
      }

      &.current,
      &.complete {
        &::after {
          border: 0;
        }
      }

      &.current {
        background-color: $header-wizard-active-color;
        color: $header-wizard-active-color;

        .label {
          color: $header-wizard-active-color;
        }
      }

      &.complete {
        background-color: $header-wizard-active-color;
        color: $header-wizard-active-color;

        .label {
          color: $header-wizard-active-color;
        }
      }
    }
  }

}

// Hide the text from the non-current ticks in small form factors
@include respond-to(phone) {
  .wizard-header {
    .tick:not(.current) {
      .label {
        visibility: hidden;
      }
    }
  }
}
